<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>学习越南语请联系Wx:XiDeYueNanYu</title>
    <style>
        body {
            background-color: #f7fbf3;
            margin-bottom: 60px;
        }
        #infoBox { 
            width: 100%; 
            max-width: 700px;
            height: 100px; 
            margin: 0 auto; 
            border: 1px solid #ccc; 
            background: #68838B; 
            color: #D2B48C; 
            display: flex; 
            align-items: center; 
            justify-content: center; 
            font-size: clamp(40px, 5vw, 60px);
            font-weight: bold;
        }
        #contactBox { 
            width: 100%; 
            max-width: 700px;
            height: 45px; 
            margin: 0px auto; 
            border: 1px solid #ccc; 
            background: #68838B; 
            color: #D2B48C; 
            display: flex; 
            align-items: center; 
            justify-content: left; 
            padding-left: 20px;
            font-size: clamp(12px, 2vw, 15px); 
            font-weight: bold;
        }
        .image-frame {
            max-width: 700px;
            margin: 20px auto 0 auto;
            border: 10px solid #957652;
            border-radius: 10px;
            background-color: #ffffff;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            display: none;
            overflow: hidden;
        }
        .image-frame img {
            width: 100%;
            height: auto;
            display: block;
        }
        .content-box {
            max-width: 700px;
            margin: 20px auto;
            padding: 50px;
            border: 10px solid #957652;
            border-radius: 10px;
            background-color: #ffffff;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            font-size: 30px;
            font-family: Arial;
            color: #222322;
            line-height: 3;
            text-align: justify;
        }
        .translated-word {
            position: relative;
            display: inline-block;
            white-space: nowrap;
            line-height: 1.3;
            background-color: #bfcdbf;
            color: #000000;
            padding: 4px 4px;
            border-radius: 2px;
        }
        .translation {
            position: absolute;
            top: -29px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 18px;
            background-color: #eddabc;
            color: #313a2d;
            padding: 4px 4px;
            border-radius: 1px;
            white-space: nowrap;
            z-index: 1;
            line-height: 1;
        }
        .original {
            display: inline;
            line-height: 1;
        }
        .floating-controls {
            position: fixed;
            top: 20px;
            right: 20px;
            background-color: #f0f0f0;
            padding: 10px;
            border-radius: 5px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
            text-align: center;
            display: block;
            z-index: 1000;
        }
        #audioPlayer {
            width: 100%;
            margin-bottom: 10px;
        }
        .time-row {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
            margin-bottom: 10px;
        }
        .time-box-group {
            display: flex;
            justify-content: center;
            gap: 10px;
        }
        .button-group {
            display: flex;
            justify-content: center;
            gap: 10px;
        }
        .floating-controls p#timeDisplay {
            font-size: 28px;
            color: #FFFFFF;
            background-color: #000000;
            padding: 5px 10px;
            border-radius: 5px;
            cursor: pointer;
            margin: 0;
        }
        .floating-controls .time-box {
            font-size: 16px;
            color: #FFFFFF;
            background-color: #555555;
            padding: 5px 10px;
            border-radius: 5px;
            min-width: 60px;
        }
        .tua-buttons {
            display: flex;
            justify-content: center;
            gap: 5px;
            margin-bottom: 10px;
            flex-wrap: wrap;
        }
        .action-buttons {
            display: flex;
            justify-content: center;
            gap: 10px;
        }
        .control-button {
            width: 50px;
            height: 50px;
            background-color: #363535;
            color: white;
            border: none;
            border-radius: 50%;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            display: inline-flex;
            justify-content: center;
            align-items: center;
        }
        .control-button:disabled {
            background-color: #888888;
            cursor: not-allowed;
        }
        .control-button:hover:not(:disabled) {
            background-color: #000000;
        }
        .pause-play-button {
            background-color: #FF4500;
        }
        .pause-play-button:hover {
            background-color: #CC3700;
        }
        .toggle-button {
            background-color: #4682B4;
        }
        .toggle-button:hover {
            background-color: #36648B;
        }
        .loop-button {
            background-color: #3c923c;
        }
        .loop-button:hover {
            background-color: #347d34;
        }
        .clear-button {
            background-color: #bc3f13;
        }
        .clear-button:hover {
            background-color: #d15124;
        }
        .active {
            background-color: #ffffff; 
            border-radius: 5px;
        }
        #quizContainer {
            display: none;
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 20px auto;
            padding: 20px;
            color: #53686f;
            font-size: 25px;
            font-weight: bold;
        }
        .question {
            margin-bottom: 20px;
            padding: 18px;
            color: #53686f;
            border: 5px solid #53686f;
            border-radius: 10px;
            background-color: #ffffff;
            font-size: 20px;
            font-weight: bold;
        }
        .options label {
            display: block;
            margin: 15px 0;
            cursor: pointer;
            color: #21292c;
            font-size: 16px;
            font-weight: bold;
        }
        #result {
            margin-top: 20px;
            padding: 10px;
            display: none;
            border: 5px solid #53686f;
            border-radius: 5px;
            font-size: 16px;
            font-weight: bold;
            background-color: #ffffff;
            color: #007a33;
        }
        .wrong-answer {
            color: #f65936;
            margin: 10px 0;
            font-size: 16px;
            font-weight: bold;
        }
        #submitQuiz {
            font-family: Arial, sans-serif;
            padding: 10px 20px;
            border: 3px solid #53686f;
            background-color: #FF6820;
            border-radius: 5px;
            color: white;
            cursor: pointer;
            font-size: 18px;
            font-weight: bold;
        }
        #submitQuiz:hover {
            background-color: #ff844a;
        }
        #vocabContainer {
            display: none;
            max-width: 700px;
            margin: 20px auto;
            padding: 20px;
            font-family: Arial, sans-serif;
        }
        #vocabControls {
            position: fixed;
            bottom: 60px;
            left: 50%;
            transform: translateX(-50%);
            width: 900px;
            background: #68838B;
            padding: 10px 0;
            box-shadow: 0 -2px 5px rgba(0, 0, 0, 0.2);
            z-index: 1000;
            margin-bottom: 10px;
        }
        #vocabControls div {
            margin: 5px 0;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        #vocabControls button {
            padding: 8px 8px;
            margin: 0 5px;
            cursor: pointer;
            border: 3px solid #5d757d;
            background: #0f1314;
            color: #fffbef;
            font-size: 28px;
            border-radius: 5px;
        }
        #sentenceNumber {
            width: 50px;
            padding: 10px;
            text-align: center;
            border: 3px solid #68838B;
            background: #FFAD5B;
            color: #000;
            border-radius: 10px;
            font-size: 16px;
            -moz-appearance: textfield;
        }
        #sentenceNumber::-webkit-inner-spin-button, 
        #sentenceNumber::-webkit-outer-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }
        #sentenceNumber:disabled {
            background: #eee;
        }
        .disabled {
            cursor: not-allowed;
            pointer-events: none;
        }
        .active-mode {
            border: 4px solid orange;
        }
        #vocabIndicator {
            width: 95%;
            max-width: 700px;
            min-height: 50px;
            margin: 10px auto;
            padding: 5px;
            border: 3px solid #734A2E;
            background: #ffffe0;
            border-radius: 10px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }
        #vocabOptionsContainer {
            width: 100%;
            max-width: 700px;
            margin: 10px auto;
        }
        .optionBtn {
            width: 95%;
            max-width: 700px;
            padding: 10px;
            margin: 5px 0;
            border: 1px solid #734A2E;
            background: #ffffff;
            color: #000;
            font-size: 30px;
            text-align: left;
            cursor: pointer;
            border-radius: 5px;
        }
        .optionBtn:hover {
            background: #D2E4C4;
        }
        .correct {
            background: #B7D7AA !important;
        }
        .wrong {
            background: #CE6D5E !important;
        }
        .floating-mode-bar {
            position: fixed;
            bottom: 0px;
            left: 50%;
            transform: translateX(-50%);
            background-color: #68838B;
            padding: 10px;
            border-radius: 5px;
            box-shadow: 0 0px 5px rgba(0, 0, 0, 1);
            display: flex;
            justify-content: center;
            gap: 20px;
            z-index: 1000;
            width: 900px;
        }
        .mode-button {
            padding: 10px 20px;
            border: 0px solid #ccc;
            background: #95a8ad;
            color: #293437;
            font-size: 20px;
            font-weight: bold;
            cursor: pointer;
            border-radius: 5px;
            transition: border-color 0.3s;
        }
        .mode-button.active {
            border: 2px solid #ffffff;
            background: #f0f0f0;
            color: #293437;
        }
        @media (max-width: 768px) { 
            body {
                margin-bottom: 200px;
            }
            #infoBox { 
                width: 90%; 
                height: 120px; 
                font-size: clamp(30px, 4vw, 40px);
            }
            #contactBox { 
                width: 90%; 
                height: 50px; 
                font-size: clamp(14px, 2vw, 16px);
            }
            .image-frame {
                width: 90%;
                margin: 10px auto 0 auto;
            }
            .content-box {
                margin: 10px auto;
                padding: 20px;
                padding-top: 50px;
                padding-bottom: 90px;
                font-size: 19px;
                line-height: 3.5;
            }
            .translated-word {
                padding: 3px 3px;
            }
            .translation {
                top: -25px;
                font-size: 13px;
            }
            .floating-controls {
                top: 10px;
                right: 10px;
                padding: 5px;
            }
            #vocabControls {
                width: 100%;
                bottom: 50px;
                padding: 5px 0;
            }
            #vocabControls button {
                padding: 6px 6px;
                font-size: 20px;
            }
            #sentenceNumber {
                width: 40px;
                padding: 8px;
                font-size: 14px;
            }
            #vocabIndicator {
                min-height: 40px;
            }
            .optionBtn {
                font-size: 20px;
                padding: 8px;
            }
            .floating-mode-bar {
                width: 100%;
            }
        }
        @media (max-width: 400px) {
            .control-button {
                width: 40px;
                height: 40px;
                font-size: 14px;
            }
            .floating-controls p#timeDisplay {
                font-size: 20px;
            }
            .floating-controls .time-box {
                font-size: 12px;
                min-width: 50px;
            }
        }
    </style>
</head>
<body>
    <div id="infoBox">习得越南语</div>
    <div id="contactBox">讲师-阮玉煌 | Weixin：XiDeYueNanYu</div>
    <div id="contentContainer">
        <div class="image-frame" id="imageFrame">
            <img id="contentImage" src="anhminhhoa.jpg" alt="Content Image">
        </div>
        <div class="content-box" id="content"></div>
    </div>
    <div id="quizContainer">
        <h1>回答下面问题</h1>
        <form id="quizForm">
            <div id="questions"></div>
            <button type="button" id="submitQuiz" onclick="checkAnswers()">提交</button>
        </form>
        <div id="result"></div>
    </div>
    <div id="vocabContainer">
        <div id="vocabIndicator"></div>
        <div id="vocabOptionsContainer"></div>
    </div>
    <div class="floating-controls" id="floatingControls">
        <audio id="audioPlayer" src="lesson.mp3" controls></audio>
        <div class="time-row">
            <p id="timeDisplay">00:00</p>
            <div class="time-box-group">
                <span class="time-box" id="loopStart">--:--</span>
                <span class="time-box" id="loopEnd">--:--</span>
            </div>
            <div class="button-group">
                <button class="control-button loop-button" id="loopButton">听</button>
                <button class="control-button clear-button" id="clearButton">删</button>
            </div>
        </div>
        <div class="tua-buttons">
            <button class="control-button" id="rewind5sButton">-5s</button>
            <button class="control-button" id="rewind1sButton">-1s</button>
            <button class="control-button" id="forward1sButton">+1s</button>
            <button class="control-button" id="forward5sButton">+5s</button>
        </div>
        <div class="action-buttons">
            <button class="control-button pause-play-button" id="pausePlayButton">播</button>
            <button class="control-button toggle-button" id="toggleControlsButton">藏</button>
        </div>
    </div>
    <div id="vocabControls">
        <div>
            <button id="prevBtn">◀</button>
            <input type="text" id="sentenceNumber" inputmode="numeric" pattern="[0-9]*">
            <button id="nextBtn">▶</button>
        </div>
        <div>
            <button id="showHideBtn" class="active-mode">显示-隐藏</button>
            <button id="replayBtn">再听一遍</button>
        </div>
    </div>
    <div class="floating-mode-bar">
        <button class="mode-button active" id="contentMode">内容</button>
        <button class="mode-button" id="quizMode">回答问题</button>
        <button class="mode-button" id="vocabMode">词汇</button>
    </div>

    <audio id="vocabAudio" src="audio.mp3"></audio>
    <audio id="correctAudio" src="Dung.mp3"></audio>
    <audio id="wrongAudio" src="Sai.mp3"></audio>

    <script>

const textContentData = [
    `VIỆN PHÁT TRIỂN NGÔN NGỮ.
Viện Phát triển Ngôn ngữ luôn mở rộng cửa đón các sinh viên nước ngoài đến học. Hằng năm, các sinh viên từ nhiều nước đến đây học tập và tìm hiểu về văn hóa Việt Nam.
Thông qua Website của Viện, sinh viên được cung cấp các thông tin về chương trình, khóa học, tài liệu học, cũng như về nhà ở và các thủ tục nhập học.
Nhiều người nước ngoài đến đây không chỉ vì địa điểm của Viện thuận lợi cho việc đi lại, mà còn vì chất lượng đào tạo ở đây. Viện có nhiều giáo viên giàu kinh nghiệm, đã từng tham gia giảng dạy ở nhiều trường đại học trên thế giới như: Mỹ, Nhật, Nga, Hàn Quốc, v.v...
Ngoài công việc giảng dạy, hằng năm Viện còn tổ chức các hội thảo khoa học, trao đổi và phổ biến kinh nghiệm giảng dạy, nghiên cứu khoa học, nhằm nâng cao chất lượng và hiệu quả của việc giảng dạy và nghiên cứu.
Viện luôn tạo điều kiện và đáp ứng những yêu cầu chính đáng của sinh viên. Vì thế, ngày càng có nhiều người đến học. Các chương trình học cũng ngày càng phong phú và hấp dẫn hơn.
Có thể nói, đây là một địa chỉ đáng tin cậy cho người nước ngoài đến học tập và tìm hiểu về Việt Nam.`
];
const dictionary = {
    "Viện": "院",
    "Phát triển": "发展",
    "Ngôn ngữ": "语言",
    "sinh viên": "学生",
    "nước ngoài": "外国",
    "học tập": "学习",
    "tìm hiểu": "了解",
    "văn hóa": "文化",
    "Việt Nam": "越南",
    "Website": "网站",
    "thông tin": "信息",
    "chương trình": "课程",
    "khóa học": "培训班",
    "tài liệu": "资料",
    "nhà ở": "住宿",
    "thủ tục": "手续",
    "nhập học": "入学",
    "địa điểm": "地点",
    "thuận lợi": "方便",
    "đi lại": "交通",
    "chất lượng": "质量",
    "đào tạo": "培训",
    "giáo viên": "教师",
    "giàu kinh nghiệm": "经验丰富",
    "giảng dạy": "教学",
    "trường đại học": "大学",
    "thế giới": "世界",
    "công việc": "工作",
    "tổ chức": "组织",
    "hội thảo": "研讨会",
    "khoa học": "科学",
    "trao đổi": "交流",
    "phổ biến": "普及",
    "nghiên cứu": "研究",
    "nâng cao": "提高",
    "hiệu quả": "效果",
    "tạo điều kiện": "创造条件",
    "đáp ứng": "满足",
    "yêu cầu": "要求",
    "chính đáng": "正当",
    "phong phú": "丰富",
    "hấp dẫn": "吸引",
    "đáng tin cậy": "可靠"
};
const quizData = [
    {
        question: "Theo bài đọc, lý do chính khiến nhiều sinh viên nước ngoài chọn Viện Phát triển Ngôn ngữ là gì?",
        options: ["Học phí thấp và thủ tục đơn giản", "Vị trí thuận tiện và chất lượng đào tạo cao", "Có ký túc xá riêng cho từng quốc tịch", "Cơ hội làm việc sau tốt nghiệp tại Việt Nam"],
        correct: "Vị trí thuận tiện và chất lượng đào tạo cao"
    },
    {
        question: "Điều nào sau đây *không đúng* với nội dung bài đọc?",
        options: ["Viện có giáo viên từng giảng dạy ở nhiều quốc gia", "Viện chỉ nhận sinh viên đến từ châu Á", "Viện tổ chức các hội thảo khoa học hằng năm", "Website của Viện cung cấp thông tin về chương trình học và nhà ở"],
        correct: "Viện chỉ nhận sinh viên đến từ châu Á"
    },
    {
        question: "Có thể suy ra vai trò của Website Viện Phát triển Ngôn ngữ là:",
        options: ["Hướng dẫn sinh viên nộp bài tập trực tuyến", "Quảng bá các chương trình học đến sinh viên nước ngoài", "Đăng tải bài giảng và tài liệu nghiên cứu", "Là nền tảng để sinh viên trao đổi học thuật"],
        correct: "Quảng bá các chương trình học đến sinh viên nước ngoài"
    },
    {
        question: "Câu “Viện luôn tạo điều kiện và đáp ứng những yêu cầu chính đáng của sinh viên” hàm ý điều gì?",
        options: ["Viện chấp nhận mọi yêu cầu cá nhân của sinh viên", "Viện linh hoạt trong chính sách tuyển sinh và học phí", "Viện quan tâm đến nhu cầu thực tế và hợp lý của sinh viên", "Sinh viên có quyền yêu cầu thay đổi chương trình học"],
        correct: "Viện quan tâm đến nhu cầu thực tế và hợp lý của sinh viên"
    },
    {
        question: "Theo bài, điểm nổi bật của đội ngũ giảng viên tại Viện là gì?",
        options: ["Tất cả đều có bằng tiến sĩ", "Có kinh nghiệm giảng dạy quốc tế", "Là người bản xứ đã sống ở nước ngoài", "Được đào tạo tại các trường đại học Việt Nam"],
        correct: "Có kinh nghiệm giảng dạy quốc tế"
    },
    {
        question: "Tác giả có thái độ như thế nào khi nói về Viện Phát triển Ngôn ngữ?",
        options: ["Trung lập và mô tả sự thật", "Phê phán những thiếu sót trong chương trình đào tạo", "Ngưỡng mộ và đánh giá tích cực", "Lo ngại về sự quá tải do số lượng sinh viên tăng"],
        correct: "Ngưỡng mộ và đánh giá tích cực"
    },
    {
        question: "Việc Viện tổ chức hội thảo khoa học hằng năm có mục đích chính là gì?",
        options: ["Thu hút thêm ngân sách từ các tổ chức quốc tế", "Giới thiệu các chương trình đào tạo mới", "Tăng cường hợp tác với các viện nghiên cứu khác", "Nâng cao hiệu quả giảng dạy và nghiên cứu"],
        correct: "Nâng cao hiệu quả giảng dạy và nghiên cứu"
    },
    {
        question: "Điều nào sau đây phản ánh đúng mối liên hệ giữa giảng dạy và nghiên cứu tại Viện?",
        options: ["Hai hoạt động này được thực hiện bởi hai bộ phận riêng biệt", "Nghiên cứu được ưu tiên hơn so với giảng dạy", "Giảng dạy và nghiên cứu hỗ trợ lẫn nhau để nâng cao chất lượng", "Chỉ giảng viên quốc tế mới tham gia vào nghiên cứu"],
        correct: "Giảng dạy và nghiên cứu hỗ trợ lẫn nhau để nâng cao chất lượng"
    },
    {
        question: "Việc chương trình học ngày càng phong phú và hấp dẫn chứng tỏ điều gì?",
        options: ["Viện đang cạnh tranh với các trường đại học lớn", "Viện tập trung vào mở rộng quy mô đào tạo", "Viện linh hoạt để thích ứng với nhu cầu đa dạng của sinh viên", "Viện chuyển sang hình thức đào tạo trực tuyến"],
        correct: "Viện linh hoạt để thích ứng với nhu cầu đa dạng của sinh viên"
    },
    {
        question: "Từ “đáng tin cậy” trong câu “đây là một địa chỉ đáng tin cậy cho người nước ngoài” có thể hiểu là gì?",
        options: ["Nổi tiếng và đắt đỏ", "Có cơ sở vật chất tốt và học phí cao", "Được sinh viên giới thiệu rộng rãi", "Có chất lượng ổn định và được đánh giá cao"],
        correct: "Có chất lượng ổn định và được đánh giá cao"
    },
    {
        question: "Có thể suy ra lý do Viện thu hút được sinh viên từ nhiều quốc gia là:",
        options: ["Có chính sách học bổng hào phóng", "Cung cấp chương trình giảng dạy bằng nhiều ngôn ngữ", "Kết hợp yếu tố học thuật, văn hóa và hỗ trợ sinh viên hiệu quả", "Tập trung vào dạy tiếng Việt chuyên ngành"],
        correct: "Kết hợp yếu tố học thuật, văn hóa và hỗ trợ sinh viên hiệu quả"
    },
    {
        question: "Mục đích chính của bài viết là gì?",
        options: ["Giới thiệu về một cơ sở giáo dục thu hút sinh viên quốc tế", "Đưa ra khuyến nghị cải tiến chất lượng giáo dục", "Phân tích khó khăn trong việc dạy tiếng Việt cho người nước ngoài", "Phê bình hệ thống đào tạo hiện tại tại Việt Nam"],
        correct: "Giới thiệu về một cơ sở giáo dục thu hút sinh viên quốc tế"
    }
];
const sentences = [
    {
        "audioFile": "audio.mp3",
        "start": 0.303583,
        "end": 1.223583,
        "correctAnswer": "phát triển",
        "translation": "发展",
        "options": [
            "phát triểng",
            "phát triển",
            "phát triền",
            "phác triển"
        ]
    },
    {
        "audioFile": "audio.mp3",
        "start": 1.393583,
        "end": 2.353583,
        "correctAnswer": "ngôn ngữ",
        "translation": "语言",
        "options": [
            "ngôn ngử",
            "ngôn ngữ",
            "ngôn ngứ",
            "ngong ngữ"
        ]
    },
    {
        "audioFile": "audio.mp3",
        "start": 2.583583,
        "end": 3.423583,
        "correctAnswer": "học tập",
        "translation": "学习",
        "options": [
            "học tạp",
            "học tậc",
            "học tập",
            "hộc tập"
        ]
    },
    {
        "audioFile": "audio.mp3",
        "start": 3.783583,
        "end": 4.763583,
        "correctAnswer": "tìm hiểu",
        "translation": "了解",
        "options": [
            "tìm hiễu",
            "tím hiểu",
            "tìm hiểu",
            "tìm hiểl"
        ]
    },
    {
        "audioFile": "audio.mp3",
        "start": 4.993583,
        "end": 6.033583,
        "correctAnswer": "văn hóa",
        "translation": "文化",
        "options": [
            "vân hóa",
            "văn hóa",
            "văn hoá",
            "văn hỏa"
        ]
    },
    {
        "audioFile": "audio.mp3",
        "start": 6.263583,
        "end": 7.163583,
        "correctAnswer": "chương trình",
        "translation": "课程",
        "options": [
            "chương trinh",
            "chương trình",
            "chưng trình",
            "chương trịnh"
        ]
    },
    {
        "audioFile": "audio.mp3",
        "start": 7.493583,
        "end": 8.353583,
        "correctAnswer": "khóa học",
        "translation": "培训班",
        "options": [
            "khóa hộc",
            "khòa học",
            "khóa học",
            "khõa học"
        ]
    },
    {
        "audioFile": "audio.mp3",
        "start": 8.623583,
        "end": 9.523583,
        "correctAnswer": "tài liệu",
        "translation": "资料",
        "options": [
            "tài liễu",
            "tài lệu",
            "tài liệu",
            "tai liệu"
        ]
    },
    {
        "audioFile": "audio.mp3",
        "start": 9.783583,
        "end": 10.633583,
        "correctAnswer": "thủ tục",
        "translation": "手续",
        "options": [
            "thủ tụt",
            "thử tục",
            "thủ tuc",
            "thủ tục"
        ]
    },
    {
        "audioFile": "audio.mp3",
        "start": 10.913583,
        "end": 11.763583,
        "correctAnswer": "nhập học",
        "translation": "入学",
        "options": [
            "nhập học",
            "nhập hộc",
            "nhạp học",
            "nhập hỏc"
        ]
    },
    {
        "audioFile": "audio.mp3",
        "start": 12.003583,
        "end": 12.883583,
        "correctAnswer": "địa điểm",
        "translation": "地点",
        "options": [
            "địa điếm",
            "địa điểm",
            "dịa điểm",
            "địa diểm"
        ]
    },
    {
        "audioFile": "audio.mp3",
        "start": 13.113583,
        "end": 14.063583,
        "correctAnswer": "thuận lợi",
        "translation": "方便",
        "options": [
            "thuận lơi",
            "thuần lợi",
            "thuận lợi",
            "thuận lởi"
        ]
    },
    {
        "audioFile": "audio.mp3",
        "start": 14.203583,
        "end": 15.123583,
        "correctAnswer": "chất lượng",
        "translation": "质量",
        "options": [
            "chất lượng",
            "chắt lượng",
            "chấc lượng",
            "chất lường"
        ]
    },
    {
        "audioFile": "audio.mp3",
        "start": 15.343583,
        "end": 16.293583,
        "correctAnswer": "đào tạo",
        "translation": "培训",
        "options": [
            "đào tạo",
            "đao tạo",
            "đào tạu",
            "đào tao"
        ]
    },
    {
        "audioFile": "audio.mp3",
        "start": 17.31087,
        "end": 18.083583,
        "correctAnswer": "kinh nghiệm",
        "translation": "经验丰富",
        "options": [
            "kinh nguyện",
            "kinh nghiệng",
            "kinh nghiệm",
            "kinh nghiện"
        ]
    },
    {
        "audioFile": "audio.mp3",
        "start": 18.303583,
        "end": 19.243583,
        "correctAnswer": "giảng dạy",
        "translation": "教学",
        "options": [
            "giảng dạy",
            "giảng dại",
            "giản dạy",
            "giãng dạy"
        ]
    },
    {
        "audioFile": "audio.mp3",
        "start": 20.151463,
        "end": 21.073583,
        "correctAnswer": "thế giới",
        "translation": "世界",
        "options": [
            "thế giối",
            "thế giới",
            "thề giới",
            "thế giói"
        ]
    },
    {
        "audioFile": "audio.mp3",
        "start": 21.343583,
        "end": 22.193583,
        "correctAnswer": "công việc",
        "translation": "工作",
        "options": [
            "công việt",
            "công việk",
            "công việc",
            "công việcc"
        ]
    },
    {
        "audioFile": "audio.mp3",
        "start": 22.423583,
        "end": 23.293583,
        "correctAnswer": "tổ chức",
        "translation": "组织",
        "options": [
            "tổ chúc",
            "tổ chức",
            "tổ chướ",
            "tỗ chức"
        ]
    },
    {
        "audioFile": "audio.mp3",
        "start": 23.553583,
        "end": 24.493583,
        "correctAnswer": "hội thảo",
        "translation": "研讨会",
        "options": [
            "hội thảo",
            "hội tháo",
            "hội thãm",
            "hội thảoa"
        ]
    },
    {
        "audioFile": "audio.mp3",
        "start": 24.763583,
        "end": 25.523583,
        "correctAnswer": "khoa học",
        "translation": "科学",
        "options": [
            "khoe học",
            "khoá học",
            "khoa học",
            "khoa hộc"
        ]
    },
    {
        "audioFile": "audio.mp3",
        "start": 25.813583,
        "end": 26.723583,
        "correctAnswer": "trao đổi",
        "translation": "交流",
        "options": [
            "trao đổi",
            "trao đỏi",
            "trao đỗi",
            "trao đội"
        ]
    },
    {
        "audioFile": "audio.mp3",
        "start": 26.983583,
        "end": 27.873583,
        "correctAnswer": "phổ biến",
        "translation": "普及",
        "options": [
            "phổ biến",
            "phổ bến",
            "phộ biến",
            "phổ biễn"
        ]
    },
    {
        "audioFile": "audio.mp3",
        "start": 28.093583,
        "end": 29.203583,
        "correctAnswer": "nghiên cứu",
        "translation": "研究",
        "options": [
            "nghiêng cứu",
            "nghiên cứ",
            "nghiên cứu",
            "nghiên cưu"
        ]
    },
    {
        "audioFile": "audio.mp3",
        "start": 29.403583,
        "end": 30.443583,
        "correctAnswer": "nâng cao",
        "translation": "提高",
        "options": [
            "nâng cao",
            "nâng cào",
            "nầng cao",
            "nâng caoa"
        ]
    },
    {
        "audioFile": "audio.mp3",
        "start": 30.613583,
        "end": 31.583583,
        "correctAnswer": "hiệu quả",
        "translation": "效果",
        "options": [
            "hiệu quã",
            "hiệu quả",
            "hiêu quả",
            "hiệu quạ"
        ]
    },
    {
        "audioFile": "audio.mp3",
        "start": 31.843583,
        "end": 32.933583,
        "correctAnswer": "tạo điều kiện",
        "translation": "创造条件",
        "options": [
            "tạo điều kiện",
            "tạo điều kiệng",
            "tạo điểu kiện",
            "tạo diều kiện"
        ]
    },
    {
        "audioFile": "audio.mp3",
        "start": 33.163583,
        "end": 34.143583,
        "correctAnswer": "chính đáng",
        "translation": "正当",
        "options": [
            "chính đắng",
            "chĩnh đáng",
            "chính đáng",
            "chính đảng"
        ]
    }
];

        // Xử lý hiển thị văn bản với từ điển
        const content = document.getElementById('content');
        function renderText() {
            let html = textContentData[0].replace(/\n/g, "<br>");
            const sortedKeys = Object.keys(dictionary).sort((a, b) => b.length - a.length);
            const replacements = [];

            sortedKeys.forEach(key => {
                const regex = new RegExp(`(\\b|[.,!?\\n\\s]|^)(${key.replace(/[.*+?^${}()|[\]\\]/g, '\\$&')})(\\b|[.,!?\\n\\s]|$)`, 'gi');
                let match;
                while ((match = regex.exec(html)) !== null) {
                    const start = match.index + match[1].length;
                    const end = start + match[2].length;
                    replacements.push({
                        start,
                        end,
                        original: match[2],
                        prefix: match[1],
                        suffix: match[3],
                        translation: dictionary[key]
                    });
                }
            });

            replacements.sort((a, b) => a.start - b.start);
            const filteredReplacements = [];
            let lastEnd = -1;
            for (const replacement of replacements) {
                if (replacement.start >= lastEnd) {
                    filteredReplacements.push(replacement);
                    lastEnd = replacement.end;
                }
            }

            for (let i = filteredReplacements.length - 1; i >= 0; i--) {
                const { start, end, original, prefix, suffix, translation } = filteredReplacements[i];
                const translatedHtml = `${prefix}<span class="translated-word"><span class="translation">${translation}</span><span class="original">${original}</span></span>${suffix}`;
                html = html.slice(0, start - prefix.length) + translatedHtml + html.slice(end + suffix.length);
            }

            content.innerHTML = html;
        }

        // Xử lý hiển thị ảnh
        const imageFrame = document.getElementById('imageFrame');
        const contentImage = document.getElementById('contentImage');
        const imageSrc = "anhminhhoa.jpg";
        function renderImage() {
            if (imageSrc) {
                contentImage.src = imageSrc;
                imageFrame.style.display = 'block';
            } else {
                imageFrame.style.display = 'none';
            }
        }

        // Xử lý audio và bảng điều khiển
        const audioPlayer = document.getElementById("audioPlayer");
        const floatingControls = document.getElementById("floatingControls");
        if (!floatingControls) {
            console.error('Không tìm thấy floatingControls');
        }
        const timeDisplay = floatingControls ? floatingControls.querySelector("#timeDisplay") : null;
        const loopStart = floatingControls ? floatingControls.querySelector("#loopStart") : null;
        const loopEnd = floatingControls ? floatingControls.querySelector("#loopEnd") : null;
        const loopButton = floatingControls ? floatingControls.querySelector("#loopButton") : null;
        const clearButton = floatingControls ? floatingControls.querySelector("#clearButton") : null;
        const rewind5sButton = floatingControls ? floatingControls.querySelector("#rewind5sButton") : null;
        const rewind1sButton = floatingControls ? floatingControls.querySelector("#rewind1sButton") : null;
        const forward1sButton = floatingControls ? floatingControls.querySelector("#forward1sButton") : null;
        const forward5sButton = floatingControls ? floatingControls.querySelector("#forward5sButton") : null;
        const pausePlayButton = floatingControls ? floatingControls.querySelector("#pausePlayButton") : null;
        const toggleControlsButton = floatingControls ? floatingControls.querySelector("#toggleControlsButton") : null;
        const tuaButtons = floatingControls ? floatingControls.querySelector(".tua-buttons") : null;

        function formatTime(seconds) {
            const minutes = Math.floor(seconds / 60);
            const secs = Math.floor(seconds % 60);
            return `${minutes.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
        }

        function updateTimeDisplay(displayElement) {
            if (displayElement) {
                displayElement.textContent = formatTime(audioPlayer.currentTime);
            }
        }

        let customLoopStart = null;
        let customLoopEnd = null;
        let clickCount = 0;
        let isLooping = false;

        if (timeDisplay) {
            const updateInterval = setInterval(() => updateTimeDisplay(timeDisplay), 1000);
            timeDisplay.onclick = () => {
                if (audioPlayer.paused) {
                    clickCount++;
                    if (clickCount === 1) {
                        customLoopStart = audioPlayer.currentTime;
                        loopStart.textContent = formatTime(customLoopStart);
                    } else if (clickCount === 2) {
                        customLoopEnd = audioPlayer.currentTime;
                        if (customLoopEnd <= customLoopStart) {
                            customLoopEnd = null;
                            loopEnd.textContent = "--:--";
                        } else {
                            loopEnd.textContent = formatTime(customLoopEnd);
                        }
                        clickCount = 0;
                    }
                }
            };
        }

        if (audioPlayer) {
            audioPlayer.ontimeupdate = function() {
                updateTimeDisplay(timeDisplay);
                if (isLooping && customLoopStart !== null && customLoopEnd !== null) {
                    if (audioPlayer.currentTime >= customLoopEnd) {
                        audioPlayer.currentTime = customLoopStart;
                    }
                }
            };
        }

        if (rewind5sButton) {
            rewind5sButton.onclick = () => {
                if (!isLooping) {
                    audioPlayer.currentTime = Math.max(0, audioPlayer.currentTime - 5);
                    updateTimeDisplay(timeDisplay);
                }
            };
        }
        if (rewind1sButton) {
            rewind1sButton.onclick = () => {
                if (!isLooping) {
                    audioPlayer.currentTime = Math.max(0, audioPlayer.currentTime - 1);
                    updateTimeDisplay(timeDisplay);
                }
            };
        }
        if (forward1sButton) {
            forward1sButton.onclick = () => {
                if (!isLooping) {
                    audioPlayer.currentTime = Math.min(audioPlayer.duration, audioPlayer.currentTime + 1);
                    updateTimeDisplay(timeDisplay);
                }
            };
        }
        if (forward5sButton) {
            forward5sButton.onclick = () => {
                if (!isLooping) {
                    audioPlayer.currentTime = Math.min(audioPlayer.duration, audioPlayer.currentTime + 5);
                    updateTimeDisplay(timeDisplay);
                }
            };
        }

        if (pausePlayButton) {
            pausePlayButton.onclick = () => {
                if (audioPlayer.paused) {
                    audioPlayer.play();
                    pausePlayButton.textContent = "停";
                } else {
                    audioPlayer.pause();
                    pausePlayButton.textContent = "播";
                }
            };
        }

        if (loopButton) {
            loopButton.onclick = () => {
                if (customLoopStart !== null && customLoopEnd !== null) {
                    audioPlayer.currentTime = customLoopStart;
                    audioPlayer.play();
                    isLooping = true;
                    if (rewind5sButton) rewind5sButton.disabled = true;
                    if (rewind1sButton) rewind1sButton.disabled = true;
                    if (forward1sButton) forward1sButton.disabled = true;
                    if (forward5sButton) forward5sButton.disabled = true;
                }
            };
        }

        if (clearButton) {
            clearButton.onclick = () => {
                customLoopStart = null;
                customLoopEnd = null;
                if (loopStart) loopStart.textContent = "--:--";
                if (loopEnd) loopEnd.textContent = "--:--";
                clickCount = 0;
                isLooping = false;
                if (rewind5sButton) rewind5sButton.disabled = false;
                if (rewind1sButton) rewind1sButton.disabled = false;
                if (forward1sButton) forward1sButton.disabled = false;
                if (forward5sButton) forward5sButton.disabled = false;
            };
        }

        let controlsVisible = true;
        if (toggleControlsButton) {
            toggleControlsButton.onclick = () => {
                if (controlsVisible) {
                    if (timeDisplay) timeDisplay.style.display = "none";
                    if (tuaButtons) tuaButtons.style.display = "none";
                    if (pausePlayButton) pausePlayButton.style.display = "none";
                    if (loopStart) loopStart.style.display = "none";
                    if (loopEnd) loopEnd.style.display = "none";
                    if (loopButton) loopButton.style.display = "none";
                    if (clearButton) clearButton.style.display = "none";
                    toggleControlsButton.textContent = "示";
                    controlsVisible = false;
                } else {
                    if (timeDisplay) timeDisplay.style.display = "inline-block";
                    if (tuaButtons) tuaButtons.style.display = "flex";
                    if (pausePlayButton) pausePlayButton.style.display = "inline-flex";
                    if (loopStart) loopStart.style.display = "inline-block";
                    if (loopEnd) loopEnd.style.display = "inline-block";
                    if (loopButton) loopButton.style.display = "inline-flex";
                    if (clearButton) clearButton.style.display = "inline-flex";
                    toggleControlsButton.textContent = "藏";
                    controlsVisible = true;
                }
            };
        }

        if (audioPlayer) {
            audioPlayer.onpause = audioPlayer.onended = function() {
                if (pausePlayButton) pausePlayButton.textContent = "播";
            };
        }

        // Xử lý chế độ từ vựng
        const vocabAudio = document.getElementById('vocabAudio');
        const correctAudio = document.getElementById('correctAudio');
        const wrongAudio = document.getElementById('wrongAudio');
        const vocabIndicator = document.getElementById('vocabIndicator');
        const sentenceNumber = document.getElementById('sentenceNumber');
        const prevBtn = document.getElementById('prevBtn');
        const nextBtn = document.getElementById('nextBtn');
        const replayBtn = document.getElementById('replayBtn');
        const showHideBtn = document.getElementById('showHideBtn');
        const vocabOptionsContainer = document.getElementById('vocabOptionsContainer');

        let currentIndex = 0;
        let showAnswer = true;
        let isPlaying = false;

        function shuffleArray(array) {
            const shuffled = [...array];
            for (let i = shuffled.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
            }
            return shuffled;
        }

        function updateVocabDisplay() {
            if (sentenceNumber) sentenceNumber.value = currentIndex + 1;
            if (vocabIndicator) {
                vocabIndicator.style.background = '#ffffe0';
                vocabIndicator.innerHTML = showAnswer ? `
                    <div style="font-size: 20px; font-weight: normal; color: #38761d;">${sentences[currentIndex].translation}</div>
                ` : '';
            }
            updateVocabOptions();
            playCurrentSentence();
        }

        function updateVocabOptions() {
            if (vocabOptionsContainer) {
                vocabOptionsContainer.innerHTML = '';
                const shuffledOptions = shuffleArray(sentences[currentIndex].options);
                shuffledOptions.forEach(option => {
                    const btn = document.createElement('button');
                    btn.className = 'optionBtn';
                    btn.textContent = option;
                    btn.onclick = () => checkVocabAnswer(option);
                    vocabOptionsContainer.appendChild(btn);
                });
            }
        }

        function playCurrentSentence() {
            if (isPlaying) vocabAudio.pause();
            [prevBtn, nextBtn, replayBtn, showHideBtn].forEach(btn => btn && btn.classList.add('disabled'));
            if (sentenceNumber) sentenceNumber.disabled = true;
            isPlaying = true;
            vocabAudio.src = sentences[currentIndex].audioFile;
            vocabAudio.currentTime = sentences[currentIndex].start;
            vocabAudio.play().catch(error => {
                console.error('Audio playback failed:', error);
                alert('Vui lòng nhấn nút “再听一遍” để phát âm thanh.');
                [prevBtn, nextBtn, replayBtn, showHideBtn].forEach(btn => btn && btn.classList.remove('disabled'));
                if (sentenceNumber) sentenceNumber.disabled = false;
                isPlaying = false;
            });

            vocabAudio.ontimeupdate = () => {
                if (vocabAudio.currentTime >= sentences[currentIndex].end) {
                    vocabAudio.pause();
                    vocabAudio.ontimeupdate = null;
                    [prevBtn, nextBtn, replayBtn, showHideBtn].forEach(btn => btn && btn.classList.remove('disabled'));
                    if (sentenceNumber) sentenceNumber.disabled = false;
                    isPlaying = false;
                }
            };
        }

        function moveSentence(direction) {
            currentIndex = (currentIndex + direction + sentences.length) % sentences.length;
            updateVocabDisplay();
        }

        function checkVocabAnswer(selectedAnswer) {
            const correctAnswer = sentences[currentIndex].correctAnswer;
            const optionButtons = vocabOptionsContainer.getElementsByClassName('optionBtn');

            for (let btn of optionButtons) {
                btn.classList.remove('correct', 'wrong');
                if (btn.textContent === selectedAnswer) {
                    if (selectedAnswer === correctAnswer) {
                        vocabIndicator.style.background = '#B7D7AA';
                        btn.classList.add('correct');
                        correctAudio.play().catch(error => console.error('Correct audio playback failed:', error));
                        correctAudio.onended = () => {
                            setTimeout(() => moveSentence(1), 200);
                        };
                    } else {
                        vocabIndicator.style.background = '#CE6D5E';
                        btn.classList.add('wrong');
                        wrongAudio.play().catch(error => console.error('Wrong audio playback failed:', error));
                        wrongAudio.onended = null;
                    }
                }
            }
        }

        if (prevBtn) {
            prevBtn.onclick = () => {
                if (!isPlaying) moveSentence(-1);
            };
        }

        if (nextBtn) {
            nextBtn.onclick = () => {
                if (!isPlaying) moveSentence(1);
            };
        }

        if (replayBtn) {
            replayBtn.onclick = () => {
                if (!isPlaying) playCurrentSentence();
            };
        }

        if (showHideBtn) {
            showHideBtn.onclick = () => {
                if (!isPlaying) {
                    showAnswer = !showAnswer;
                    showHideBtn.classList.toggle('active-mode');
                    updateVocabDisplay();
                }
            };
        }

        if (sentenceNumber) {
            sentenceNumber.onchange = () => {
                if (!isPlaying) {
                    const num = parseInt(sentenceNumber.value) - 1;
                    if (!isNaN(num) && num >= 0 && num < sentences.length) {
                        currentIndex = num;
                        updateVocabDisplay();
                    } else {
                        alert(`输入范围： 1 到 ${sentences.length}`);
                        updateVocabDisplay();
                    }
                }
            };

            sentenceNumber.onkeydown = (e) => {
                if (!isPlaying) {
                    if (e.key === 'ArrowLeft') moveSentence(-1);
                    if (e.key === 'ArrowRight') moveSentence(1);
                }
            };
        }

        function initVocab() {
            currentIndex = 0;
            showAnswer = true;
            isPlaying = false;
            updateVocabDisplay();
        }

        // Xử lý câu hỏi
        let contentScrollPosition = 0;
        let quizScrollPosition = 0;
        let vocabScrollPosition = 0;
        let userSelections = {};
        let isSubmitted = false;

        function loadQuiz() {
            const questionsDiv = document.getElementById('questions');
            if (questionsDiv) {
                questionsDiv.innerHTML = '';
                quizData.forEach((item, index) => {
                    const questionDiv = document.createElement('div');
                    questionDiv.className = 'question';
                    const questionTitle = document.createElement('h3');
                    questionTitle.textContent = `Câu ${index + 1}: ${item.question}`;
                    questionDiv.appendChild(questionTitle);

                    const optionsDiv = document.createElement('div');
                    optionsDiv.className = 'options';
                    item.options.forEach(option => {
                        const label = document.createElement('label');
                        const isChecked = userSelections[`question${index}`] === option ? 'checked' : '';
                        label.innerHTML = `
                            <input type="radio" name="question${index}" value="${option}" ${isChecked}>
                            ${option}
                        `;
                        optionsDiv.appendChild(label);
                    });

                    questionDiv.appendChild(optionsDiv);
                    questionsDiv.appendChild(questionDiv);
                });
                window.scrollTo(0, quizScrollPosition);
            }
        }

        function saveSelections() {
            quizData.forEach((_, index) => {
                const selected = document.querySelector(`input[name="question${index}"]:checked`);
                if (selected) {
                    userSelections[`question${index}`] = selected.value;
                }
            });
        }

        function checkAnswers() {
            let score = 0;
            const total = quizData.length;
            let wrongAnswers = [];
            quizData.forEach((item, index) => {
                const selected = document.querySelector(`input[name="question${index}"]:checked`);
                if (selected) {
                    if (selected.value === item.correct) {
                        score++;
                    } else {
                        wrongAnswers.push({
                            question: item.question,
                            selected: selected.value,
                            correct: item.correct
                        });
                    }
                } else {
                    wrongAnswers.push({
                        question: item.question,
                        selected: "未选择",
                        correct: item.correct
                    });
                }
            });

            const resultDiv = document.getElementById('result');
            if (resultDiv) {
                resultDiv.style.display = 'block';
                resultDiv.innerHTML = `
                    <h3>YD-
VPTNN
-结果: ${score}/${total} 答案正确</h3>
                    <p>比例: ${(score/total * 100).toFixed(2)}%</p>
                `;
                if (wrongAnswers.length > 0) {
                    resultDiv.innerHTML += '<h4>错误答案:</h4>';
                    wrongAnswers.forEach((wrong, index) => {
                        resultDiv.innerHTML += `
                            <div class="wrong-answer">
                                Câu ${quizData.findIndex(q => q.question === wrong.question) + 1}: ${wrong.question}<br>
                                你的选择: ${wrong.selected} - 正确答案: ${wrong.correct}
                            </div>
                        `;
                    });
                } else {
                    resultDiv.innerHTML += '<p>回答正确所有问题</p>';
                }
                resultDiv.scrollIntoView({ behavior: 'smooth' });
                isSubmitted = true;
            }
        }

        // Xử lý chế độ hiển thị
        const contentModeButton = document.getElementById('contentMode');
        const quizModeButton = document.getElementById('quizMode');
        const vocabModeButton = document.getElementById('vocabMode');
        const contentContainer = document.getElementById('contentContainer');
        const quizContainer = document.getElementById('quizContainer');
        const vocabContainer = document.getElementById('vocabContainer');
        const vocabControls = document.getElementById('vocabControls');

        if (contentModeButton) {
            contentModeButton.addEventListener('click', () => {
                quizScrollPosition = window.scrollY;
                vocabScrollPosition = window.scrollY;
                saveSelections();
                contentContainer.style.display = 'block';
                quizContainer.style.display = 'none';
                vocabContainer.style.display = 'none';
                vocabControls.style.display = 'none';
                contentModeButton.classList.add('active');
                quizModeButton.classList.remove('active');
                vocabModeButton.classList.remove('active');
                floatingControls.style.display = 'block';
                renderText();
                renderImage();
                window.scrollTo(0, contentScrollPosition);
            });
        }

        if (quizModeButton) {
            quizModeButton.addEventListener('click', () => {
                contentScrollPosition = window.scrollY;
                vocabScrollPosition = window.scrollY;
                saveSelections();
                contentContainer.style.display = 'none';
                quizContainer.style.display = 'block';
                vocabContainer.style.display = 'none';
                vocabControls.style.display = 'none';
                quizModeButton.classList.add('active');
                contentModeButton.classList.remove('active');
                vocabModeButton.classList.remove('active');
                floatingControls.style.display = 'none';
                if (isSubmitted) {
                    userSelections = {};
                    isSubmitted = false;
                }
                loadQuiz();
            });
        }

        if (vocabModeButton) {
            vocabModeButton.addEventListener('click', () => {
                contentScrollPosition = window.scrollY;
                quizScrollPosition = window.scrollY;
                saveSelections();
                contentContainer.style.display = 'none';
                quizContainer.style.display = 'none';
                vocabContainer.style.display = 'block';
                vocabControls.style.display = 'block';
                vocabModeButton.classList.add('active');
                contentModeButton.classList.remove('active');
                quizModeButton.classList.remove('active');
                floatingControls.style.display = 'none';
                initVocab();
                window.scrollTo(0, vocabScrollPosition);
            });
        }

        // Khởi tạo
        document.addEventListener('DOMContentLoaded', () => {
            renderText();
            renderImage();
            contentContainer.style.display = 'block';
            quizContainer.style.display = 'none';
            vocabContainer.style.display = 'none';
            vocabControls.style.display = 'none';
        });
    </script>
</body>
</html>
